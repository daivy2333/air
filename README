# AIR - Application Interface Center
AIR provides a language-agnostic Project Intermediate Representation (PIR) capable of modeling C, assembly, and linker semantics for system-level projects, enabling structural understanding of kernels, runtimes, and low-level software.
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)

## ğŸš€ ç®€ä»‹

AIR (Application Interface Center) æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº PIR (Project Intermediate Representation) çš„æ­£å‘ç”Ÿæˆå’Œé€†å‘é‡æ„ã€‚
PIR is an architectural-level IR, not a semantic or execution-level IR.
PIR æ˜¯ä¸€ç§é¢å‘ AI ä¼˜åŒ–çš„é¡¹ç›®ä¸­é—´è¡¨ç¤ºï¼Œæ—¨åœ¨ç”¨æœ€å°‘çš„ token å®Œæ•´æè¿°é¡¹ç›®æ¶æ„ã€‚

## âœ¨ ç‰¹æ€§

- âœ… å¤šè¯­è¨€æ”¯æŒ (Python, Rust, C/C++, Java, æ±‡ç¼–ç­‰)
- âœ… ä¾èµ–å…³ç³»æ± å‹ç¼©ç®—æ³•
- âœ… Profile-Aware è¯­ä¹‰æ¨æ–­
- âœ… æç®€ Token è®¾è®¡
- âœ… ç»Ÿä¸€çš„å‘½ä»¤è¡Œæ¥å£
- âœ… å¯ä½œä¸ºç³»ç»Ÿå‘½ä»¤å®‰è£…ä½¿ç”¨

## ğŸ“¦ å®‰è£…

### å¼€å‘æ¨¡å¼å®‰è£…

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
pip install -e .
```

æ•ˆæœï¼š
- âœ” ç«‹å³ç”Ÿæˆ `air` å‘½ä»¤
- âœ” ä»£ç æ”¹åŠ¨ç«‹å³ç”Ÿæ•ˆ
- âœ” ä¸æ±¡æŸ“ç³»ç»Ÿï¼ˆå¯å¸è½½ï¼‰

### æ­£å¼å®‰è£…

```bash
pip install .
```

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### æ­£å‘ç”Ÿæˆ PIR

ä»æºä»£ç ç”Ÿæˆ PIR æ–‡ä»¶ï¼š

```bash
# åŸºæœ¬ä½¿ç”¨
air forward /path/to/project

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
air forward /path/to/project -o my_project.pir

# ä½¿ç”¨ç‰¹å®šé…ç½®
air forward /path/to/project --profile rust

# ç¦ç”¨ç¼“å­˜
air forward /path/to/project --no-cache
```

### é€†å‘é‡æ„é¡¹ç›®

ä» PIR æ–‡ä»¶é‡æ„é¡¹ç›®ï¼š

```bash
# åŸºæœ¬ä½¿ç”¨
air reverse example.pir output/

# ä»…éªŒè¯ PIR
air reverse example.pir output/ --validate-only

# æŒ‡å®šé¡¹ç›®æ ¹ç›®å½•
air reverse example.pir output/ --project-root /path/to/source
```

### ç”Ÿæˆä»£ç è¯æ®ï¼ˆPCESï¼‰

ä» PCR æ–‡ä»¶ç”Ÿæˆ PCES é™æ€è¯æ®ï¼š

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆè‡ªåŠ¨æŸ¥æ‰¾åŒç›®å½•çš„ .pcr æ–‡ä»¶ï¼‰
air peek request.pcr

# æŒ‡å®šæºç ç›®å½•
air peek request.pcr --source-dir /path/to/source

# è¾“å‡ºåˆ°æ–‡ä»¶
air peek request.pcr -o evidence.pces
```

**å·¥ä½œæµç¨‹**ï¼š
1. å·¥å…·è‡ªåŠ¨æŸ¥æ‰¾ä¸ PCR æ–‡ä»¶åŒåçš„ `.pir` æ–‡ä»¶ï¼ˆå¦‚ `request.pcr` æŸ¥æ‰¾ `request.pir`ï¼‰
2. å¦‚æœæ‰¾ä¸åˆ°åŒåæ–‡ä»¶ï¼Œåˆ™æŸ¥æ‰¾ç›®å½•ä¸­ä»»æ„ `.pir` æ–‡ä»¶
3. ä½¿ç”¨æ‰¾åˆ°çš„ PIR æ–‡ä»¶å¤„ç† PCR è¯·æ±‚

**ç‰¹ç‚¹**ï¼š
- è‡ªåŠ¨æŸ¥æ‰¾åŒç›®å½•ä¸‹çš„ `.pir` æ–‡ä»¶
- æ— éœ€æ‰‹åŠ¨æŒ‡å®š PIR è·¯å¾„
- æ”¯æŒ PCR è§„èŒƒ v1

**ä½¿ç”¨åœºæ™¯**ï¼š
- AI åˆ†æ PIR åéœ€è¦æ›´å¤šä¿¡æ¯æ—¶ï¼Œç”Ÿæˆ PCR è¯·æ±‚
- ä½¿ç”¨ `air peek` å¤„ç† PCR è·å– PCES è¯æ®
- å°† PCES è¿”å›ç»™ AI ç»§ç»­åˆ†æ

### ä½¿ç”¨ Python æ¨¡å—æ–¹å¼

```bash
python -m air forward ./my_project
python -m air reverse my_project.pir output/
python -m air peek request.pcr
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
air/
â”œâ”€â”€ air/                          # ä¸»åŒ…ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ __main__.py              # æ”¯æŒ `python -m air`
â”‚   â”œâ”€â”€ app.py                   # ç»Ÿä¸€å…¥å£
â”‚   â””â”€â”€ services/                # æœåŠ¡å±‚
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ forward.py           # æ­£å‘æœåŠ¡ï¼ˆPIR ç”Ÿæˆï¼‰
â”‚       â”œâ”€â”€ reverse.py           # é€†å‘æœåŠ¡ï¼ˆé¡¹ç›®é‡æ„ï¼‰
â”‚       â””â”€â”€ peek.py              # è¯æ®æœåŠ¡ï¼ˆPCES ç”Ÿæˆï¼‰
â”œâ”€â”€ pirgen/                      # æ­£å‘å¼•æ“
â”œâ”€â”€ pir-reconstructor/           # é€†å‘å¼•æ“
â”œâ”€â”€ pcegen/                      # è¯æ®ç”Ÿæˆå¼•æ“
â”œâ”€â”€ pyproject.toml               # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                    # æœ¬æ–‡æ¡£
```

## ğŸ”§ æ¶æ„è¯´æ˜

### æœåŠ¡å±‚ï¼ˆair/services/ï¼‰

- `forward.py`: å°è£… pirgen çš„åŠŸèƒ½ï¼Œæä¾› PIR ç”ŸæˆæœåŠ¡
- `reverse.py`: å°è£… pir-reconstructor çš„åŠŸèƒ½ï¼Œæä¾›é¡¹ç›®é‡æ„æœåŠ¡
- `peek.py`: å°è£… pcegen çš„åŠŸèƒ½ï¼Œæä¾› PCES ç”ŸæˆæœåŠ¡

### åº”ç”¨å±‚ï¼ˆair/app.pyï¼‰

- æä¾›ç»Ÿä¸€çš„å‘½ä»¤è¡Œæ¥å£
- è°ƒç”¨ç›¸åº”çš„æœåŠ¡å±‚åŠŸèƒ½
- å¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œé”™è¯¯

## ğŸ“ å‘½ä»¤è¡Œå‚æ•°

### forward å‘½ä»¤

- `src`: æºä»£ç é¡¹ç›®è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- `-o, --out`: è¾“å‡º PIR æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
- `--profile`: é…ç½®æ–‡ä»¶åç§°ï¼ˆé»˜è®¤ï¼šgenericï¼‰
- `--name`: é¡¹ç›®åç§°ï¼ˆé»˜è®¤ï¼šç›®å½•åï¼‰
- `--no-cache`: ç¦ç”¨åˆ†æç¼“å­˜

### reverse å‘½ä»¤

- `pir`: PIR æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- `output_dir`: è¾“å‡ºç›®å½•ï¼ˆå¿…éœ€ï¼‰
- `--project-root`: é¡¹ç›®æ ¹ç›®å½•ï¼ˆå¯é€‰ï¼‰
- `--validate-only`: ä»…éªŒè¯ PIR è€Œä¸è¿›è¡Œé‡æ„

### peek å‘½ä»¤

- `pcr`: PCR æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- `--source-dir`: æºç ç›®å½•ï¼ˆå¯é€‰ï¼Œé»˜è®¤ï¼šPCR æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰
- `-o, --output`: è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤ï¼šæ ‡å‡†è¾“å‡ºï¼‰

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
