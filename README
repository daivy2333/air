pirgen/
├── pirgen.py                 # 主入口：自动路由 + 配置加载
├── core/
│   ├── pir_builder.py        # PIR 文本构建器（严格按规范）
│   ├── project_model.py      # 内部数据模型（Unit, Symbol, Dep...）
│   └── dep_canon.py          # 依赖语义归一化（Dependency Canonicalization）
├── analyzers/
│   ├── base.py               # Analyzer 抽象基类
│   ├── c_analyzer.py         # C/C++（用 gcc -MM + ctags）
│   ├── rust_analyzer.py      # Rust（用 rustc --emit=dep-info + rust-analyzer）
│   ├── java_analyzer.py      # Java（用 javac -XprintRounds 或解析 imports）
│   ├── python_analyzer.py    # Python（用 ast 模块）
│   ├── asm_ld_analyzer.py    # 汇编 & 链接脚本（正则 + 启发式）
│   └── __init__.py           # 注册所有 analyzer
├── README_CANON.md           # 依赖归一化功能说明文档
└── config_schema.json        # （可选）配置文件 schema

## PIR 生成流程

1. scan_project - 扫描项目源文件
2. resolve_dependencies - 解析依赖关系
3. canonicalize_dependencies - 归一化依赖语义（新增）
4. finalize_dependencies - 最终化依赖
5. emit PIR - 生成 PIR 文件

## 依赖归一化

将标准库依赖归一化为语义形式：
- Python: [os], [sys], [re] → [stdlib:py]
- C: [stdio.h], [stdlib.h] → [stdlib:c]
- Rust: [std::xxx] → [stdlib:rust]

详见 README_CANON.md